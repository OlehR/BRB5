<?xml version="1.0" encoding="utf-8"?>

<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
                      xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
                      xmlns:Model="clr-namespace:BRB5.Model;assembly=BRB5.Model"                   
                      x:Class="BRB6.RaitingDoc">
    <ContentPage.Content>
        <Grid RowDefinitions="*,auto">
        <ListView x:Name="ListQuestions"
                  HasUnevenRows="True"
                  ItemsSource="{Binding MyDoc}">
            <ListView.Header>
                <StackLayout Orientation="Horizontal">
                    <Label Text="Документи" FontSize="25"
                           BackgroundColor="#c5cae9" HorizontalOptions="FillAndExpand" />
                </StackLayout>
            </ListView.Header>
            <ListView.ItemTemplate>
                <DataTemplate xmlns:brb5="clr-namespace:BRB6" x:DataType="Model:DocVM">
                    <ViewCell>
                        <ViewCell.View BackgroundColor="white">

                            <Grid Padding="4"
                                  BackgroundColor="#dede7b">
                                <Grid Focused="Grid_Focused"
                                      BackgroundColor="{Binding GetColor}">

                                    <Grid.GestureRecognizers>
                                        <TapGestureRecognizer Tapped="OnButtonClicked" />
                                    </Grid.GestureRecognizers>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="3*" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>

                                    <Label Grid.Row="0"
                                           Grid.Column="0"
                                           FontSize="Medium"
                                           FontAttributes="Bold"
                                           Text="{Binding CodeWarehouse}" />
                                    <Label Grid.Row="0"
                                           Grid.Column="1"
                                           FontSize="Small"
                                           Text="{Binding ShortAddress}" />

                                    <Label Grid.Row="1"
                                           Grid.Column="0"
                                           Text="{Binding DateString}"
                                           ClassId="Ok"
                                           FontSize="Small" />
                                    <StackLayout Orientation="Horizontal"
                                                 Grid.Row="1"
                                                 Grid.Column="1">

                                        <Label Text="{Binding NumberDoc}" />
                                        <Label FontSize="Small"
                                           HorizontalOptions="Center"
                                           Text="{Binding Description}" />
                                    </StackLayout >

                                        <ImageButton Clicked="SavePhoto"
                                                IsVisible="{OnPlatform iOS=false,Android=true}"
                                                 Grid.RowSpan="2"
                                                 Grid.Row="0"                                                 
                                                 Grid.Column="3"
                                                 HeightRequest="60"
                                                 Aspect="AspectFit"
                                                 Source="archive_save.png"
                                        />

                                        <Button Clicked="SavePhoto"
                                                IsVisible="{OnPlatform iOS=true,Android=false}"
                                                    Text="S"
                                                TextColor="Black"
                                                    BackgroundColor="Beige"
                                                FontSize="30"
                                                 Grid.RowSpan="2"
                                                 Grid.Row="0"                                                 
                                                 Grid.Column="3"
                                                 HeightRequest="60"
                                            />
                                    </Grid>
                            </Grid>
                        </ViewCell.View>
                    </ViewCell>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>


            <ProgressBar ScaleY="2"
                         Grid.Row="1"
                         Progress="{Binding PB}"
                         VerticalOptions="End"
                         ProgressColor="Black" />
        </Grid>
    </ContentPage.Content>

</ContentPage>